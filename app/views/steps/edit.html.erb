<div class="container w-50">
  <h1>Edit step</h1>
  <%= form_with model: [@recipe, @step] do |form| %>
    <div class='form-group'>
      <%= form.label :operation %>
      <%= form.text_area :operation, required: true, class: 'form-control' %>
    </div>

    <div class='form-group'>
      <%= form.label :expected_minutes %>
      <%= form.number_field :expected_minutes, step: :any, required: true, class: 'form-control' %>
    </div>

    <div class='form-group'>
      <%= form.label :comment %>
      <%= form.text_area :comment, class: 'form-control' %>
    </div>

    <table class='table'>
      <tbody>
        <tr>
          <%= form.fields_for :uses do |ff| %>
            <td><%= render partial: 'steps/use_fields', locals: { f: ff } %></td>
          <% end %>

          <%= form.fields_for :utilities do |ff| %>
            <td><%= render partial: 'steps/utility_fields', locals: { f: ff } %></td>
          <% end %>
        </tr>
        <tr>
          <td><%= link_to_add_fields('Add an ingredient', form, :uses, class: 'btn btn-primary btn-sm') %></td>
          <td><%= link_to_add_fields('Add an utensil', form, :utilities, class: 'btn btn-primary btn-sm') %></td>
        </tr>
      </tbody>  
    </table>
    
    <div class='form-group'>
      <%= form.submit 'Edit Step', class: 'btn btn-info form-control' %>
    </div>
  <% end %>
  <%= link_to 'Back', recipe_path(@recipe), class: 'btn btn-secondary btn-sm' %>
</div>
